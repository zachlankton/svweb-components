document.addEventListener("DOMContentLoaded",loaded);const e={};export async function cacheFetch(t){return e[t]=e[t]||fetch(t).then((e=>e.text())).then((n=>(e[t]=n,n))),e[t]}export async function loaded(){await async function(){const e=document.querySelectorAll("[hx-load]"),t=[];return e.forEach((e=>{const n=e.getAttribute("hx-load");t.push(cacheFetch(n).then((t=>{e.innerHTML=t,e.querySelectorAll("script").forEach((t=>{const n=document.createElement("script");n.type="module",n.id=crypto.randomUUID(),n.innerText=`\n            import { createComponent } from "/main.js";\n            const {refs, elm, module} = await createComponent("${n.id}");\n            ${t.innerText}\n            module.remove();\n            const childLen = elm.children.length;\n            for (let i = childLen - 1; i >= 0; i--) {\n              const child = elm.children[i];\n              elm.after(child);\n            }\n            elm.remove();\n          `,e.appendChild(n),t.remove()}))})))})),await Promise.allSettled(t)}()}function t(e){const t=e.querySelectorAll("[ref]"),n={};return t.forEach((e=>{n[e.getAttribute("ref")]=e})),n}export async function createComponent(e){const n=document.getElementById(e);n.setAttribute("already-loaded","");const o=n.parentElement;return{refs:t(o),elm:o,module:n}}export function createSignal(e,t=[]){const n="function"==typeof e,o=()=>n?e(t):e;let r=o(),c=[];const i=()=>{c.forEach((e=>e(r)))},l=()=>r;return l.subscribe=e=>(c.push(e),r),l.bindToText=e=>{bindTo("textContent",e,l)},l.bindToHTML=e=>{bindTo("innerHTML",e,l)},t.forEach((e=>{e.subscribe((e=>{r=o(),i()}))})),[l,e=>{r=e,i()}]}export function bindTo(e,t,n){const o=n.subscribe((n=>{t[e]=n}));t[e]=o}